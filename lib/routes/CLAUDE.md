[æ ¹ç›®å½•](../../CLAUDE.md) > [lib](../) > **routes**

# è·¯ç”±ç³»ç»Ÿæ¨¡å—

## æ¨¡å—èŒè´£

routes ç›®å½•æ˜¯ RSSHub çš„æ ¸å¿ƒåŠŸèƒ½æ¨¡å—ï¼ŒåŒ…å« 1000+ ä¸ª RSS è·¯ç”±å®šä¹‰ï¼Œè´Ÿè´£ï¼š
- å°†å„ç§ç½‘ç«™å’ŒæœåŠ¡çš„å†…å®¹è½¬æ¢ä¸º RSS/Atom è®¢é˜…æº
- æä¾›ç»Ÿä¸€çš„è·¯ç”±å®šä¹‰å’Œå¤„ç†è§„èŒƒ
- æ”¯æŒå¤šç§æ•°æ®è·å–æ–¹å¼ï¼ˆHTTP APIã€çˆ¬è™«ã€Puppeteerï¼‰
- å¤„ç†ä¸åŒç½‘ç«™çš„åçˆ¬æœºåˆ¶

## ç›®å½•ç»“æ„

æ¯ä¸ªè·¯ç”±ç›®å½•åŒ…å«ï¼š
- `namespace.ts` - å‘½åç©ºé—´å®šä¹‰ï¼ˆè·¯ç”±å…ƒä¿¡æ¯ï¼‰
- å…·ä½“çš„è·¯ç”±å¤„ç†æ–‡ä»¶ï¼ˆ`.ts`ï¼‰
- å­ç›®å½•ï¼ˆå¦‚ `music/`ã€`news/` ç­‰ï¼‰ç”¨äºåˆ†ç±»ç®¡ç†
- `utils.ts` - å·¥å…·å‡½æ•°ï¼ˆå¦‚åŠ å¯†ã€ç­¾åã€æ•°æ®å¤„ç†ç­‰ï¼‰

## å…¥å£ä¸å¯åŠ¨

### è·¯ç”±æ³¨å†Œæµç¨‹
1. é€šè¿‡ `directory-import` åŠ¨æ€æ‰«æè·¯ç”±ç›®å½•
2. åŠ è½½æ¯ä¸ªå‘½åç©ºé—´çš„ `namespace.ts`
3. æ³¨å†Œè·¯ç”±åˆ°å…¨å±€è·¯ç”±è¡¨
4. æ„å»ºè·¯ç”±å‚æ•°ç±»å‹å®šä¹‰

### è·¯ç”±ç»„ç»‡æ–¹å¼
```
routes/
â”œâ”€â”€ 163/           # ç½‘æ˜“ç³»æœåŠ¡
â”œâ”€â”€ bilibili/      # Bç«™ç›¸å…³
â”œâ”€â”€ twitter/       # Twitter/X
â”œâ”€â”€ github/        # GitHub
â”œâ”€â”€ weibo/         # å¾®åš
â”œâ”€â”€ zhihu/         # çŸ¥ä¹
â”œâ”€â”€ juejin/        # æ˜é‡‘
â”œâ”€â”€ sspai/         # å°‘æ•°æ´¾
â”œâ”€â”€ v2ex/          # V2EX
â”œâ”€â”€ instagram/     # Instagram
â”œâ”€â”€ taobao/        # æ·˜å®
â”œâ”€â”€ jd/            # äº¬ä¸œ
â”œâ”€â”€ toutiao/       # ä»Šæ—¥å¤´æ¡
â”œâ”€â”€ xiaohongshu/   # å°çº¢ä¹¦
â”œâ”€â”€ douyin/        # æŠ–éŸ³
â”œâ”€â”€ kuaishou/      # å¿«æ‰‹
â”œâ”€â”€ wechat/        # å¾®ä¿¡å…¬ä¼—å·
â””â”€â”€ ...            # 1000+ ä¸ªè·¯ç”±
```

## å¯¹å¤–æ¥å£

### è·¯ç”±å®šä¹‰æ¥å£
```typescript
interface Route {
    path: string | string[];           // è·¯ç”±è·¯å¾„
    categories: string[];              // åˆ†ç±»æ ‡ç­¾
    example: string;                   // ç¤ºä¾‹ URL
    parameters: Record<string, string>; // å‚æ•°è¯´æ˜
    features: {                        // ç‰¹æ€§æ ‡è®°
        requireConfig?: ConfigItem[];
        requirePuppeteer?: boolean;
        antiCrawler?: boolean;
        supportBT?: boolean;
        supportPodcast?: boolean;
        supportScihub?: boolean;
    };
    name: string;                      // è·¯ç”±åç§°
    maintainers: string[];             // ç»´æŠ¤è€…
    handler: Handler;                  // å¤„ç†å‡½æ•°
}
```

### å‘½åç©ºé—´æ¥å£
```typescript
interface Namespace {
    name: string;          // æ˜¾ç¤ºåç§°
    url: string;          // å®˜æ–¹ç½‘å€
    description: string;   // æè¿°
    lang: string;         // è¯­è¨€ä»£ç 
    categories?: string[]; // é»˜è®¤åˆ†ç±»
}
```

## å…³é”®ä¾èµ–ä¸é…ç½®

### æ ¸å¿ƒå·¥å…·
- **got** - HTTP å®¢æˆ·ç«¯ï¼ˆå·²åºŸå¼ƒï¼Œé€æ­¥è¿ç§»åˆ° ofetchï¼‰
- **ofetch** - æ–°ä¸€ä»£ HTTP å®¢æˆ·ç«¯
- **puppeteer-real-browser** - æµè§ˆå™¨è‡ªåŠ¨åŒ–
- **cheerio** - HTML è§£æ
- **jsdom** - DOM æ“ä½œ
- **crypto-js** - åŠ å¯†è§£å¯†

### é…ç½®ç®¡ç†
- Cookie é…ç½®ï¼ˆå¦‚ `ZHIHU_COOKIES`ã€`WEIBO_COOKIES`ï¼‰
- ä»£ç†é…ç½®
- è¯·æ±‚å¤´é…ç½®
- åçˆ¬ç­–ç•¥é…ç½®

## è·¯ç”±åˆ†ç±»

### ä¸»è¦åˆ†ç±»
- **multimedia** - å¤šåª’ä½“ï¼ˆéŸ³ä¹ã€è§†é¢‘ã€å›¾ç‰‡ï¼‰
- **social** - ç¤¾äº¤åª’ä½“
- **social-media** - ç¤¾äº¤åª’ä½“ï¼ˆä¸­æ–‡å¹³å°ï¼‰
- **news** - æ–°é—»èµ„è®¯
- **new-media** - æ–°åª’ä½“ï¼ˆå¾®ä¿¡å…¬ä¼—å·ç­‰ï¼‰
- **tech** - ç§‘æŠ€
- **finance** - é‡‘è
- **study** - å­¦ä¹ æ•™è‚²
- **live** - ç›´æ’­
- **shopping** - è´­ç‰©
- **game** - æ¸¸æˆ
- **university** - é«˜æ ¡

### ç‰¹æ®Šæ ‡è®°
- `nsfw` - æˆäººå†…å®¹æ ‡è®°
- `requirePuppeteer` - éœ€è¦ Puppeteer
- `antiCrawler` - æœ‰åçˆ¬æœºåˆ¶
- `supportBT` - æ”¯æŒ BitTorrent
- `supportPodcast` - æ”¯æŒæ’­å®¢

## å·²æ‰«æçš„çƒ­é—¨å¹³å°

### ä¸­å›½å¹³å°
1. **çŸ¥ä¹** (zhihu)
   - 26ä¸ªè·¯ç”±æ–‡ä»¶
   - çƒ­æ¦œã€é—®é¢˜ã€ä¸“æ ã€æ—¥æŠ¥ã€è¯é¢˜ã€æ—¶é—´çº¿ç­‰
   - éœ€è¦é…ç½® `ZHIHU_COOKIES` ä»¥è·å–å®Œæ•´å†…å®¹
   - ä½¿ç”¨ç­¾åæœºåˆ¶ç»•è¿‡åçˆ¬

2. **å¾®åš** (weibo)
   - 9ä¸ªè·¯ç”±æ–‡ä»¶
   - ç”¨æˆ·æ—¶é—´çº¿ã€çƒ­æœã€ç”¨æˆ·ä¸»é¡µã€å…³é”®è¯æœç´¢ç­‰
   - æ”¯æŒä¸°å¯Œçš„å¯è¯»æ€§å‚æ•°é…ç½®
   - éƒ¨åˆ†åŠŸèƒ½éœ€è¦ `WEIBO_COOKIES`

3. **å°çº¢ä¹¦** (xiaohongshu)
   - 4ä¸ªè·¯ç”±æ–‡ä»¶
   - ç”¨æˆ·ç¬”è®°ã€æ”¶è—ç­‰
   - éœ€è¦é…ç½® `XIAOHONGSHU_COOKIE`
   - æ”¯æŒ Puppeteer è®¿é—®

4. **æŠ–éŸ³** (douyin)
   - 6ä¸ªè·¯ç”±æ–‡ä»¶
   - ç›´æ’­é—´å¼€æ’­ç­‰
   - åçˆ¬ä¸¥æ ¼ï¼Œéœ€è¦å¯ç”¨ puppeteer
   - è§†é¢‘CDNéªŒè¯Referer

5. **å¿«æ‰‹** (kuaishou)
   - 4ä¸ªè·¯ç”±æ–‡ä»¶
   - ç”¨æˆ·ä¸»é¡µè§†é¢‘ç­‰
   - ä½¿ç”¨ Puppeteer è·å–æ•°æ®

6. **æ·˜å®/å¤©çŒ«** (taobao)
   - 5ä¸ªè·¯ç”±æ–‡ä»¶
   - ä¼—ç­¹é¡¹ç›®ç­‰
   - ç›¸å¯¹ç®€å•ï¼Œæ— ç‰¹æ®Šåçˆ¬

7. **äº¬ä¸œ** (jd)
   - 3ä¸ªè·¯ç”±æ–‡ä»¶
   - å•†å“ä»·æ ¼ç›‘æ§ç­‰
   - ç®€å•APIè°ƒç”¨

8. **ä»Šæ—¥å¤´æ¡** (toutiao)
   - 4ä¸ªè·¯ç”±æ–‡ä»¶
   - ç”¨æˆ·ä¸»é¡µç­‰
   - ä½¿ç”¨ a-bogus åŠ å¯†å‚æ•°

9. **å“”å“©å“”å“©** (bilibili)
   - 50ä¸ªè·¯ç”±æ–‡ä»¶
   - UPä¸»æŠ•ç¨¿ã€ç›´æ’­ã€ç•ªå‰§ã€æ¼«ç”»ç­‰
   - WBIç­¾åéªŒè¯æœºåˆ¶
   - å®Œæ•´çš„APIæ”¯æŒ

### å›½é™…å¹³å°
1. **Twitter/X** (twitter)
   - 20ä¸ªè·¯ç”±æ–‡ä»¶
   - æ”¯æŒå¤šç§è®¤è¯æ–¹å¼
   - ä¸°å¯Œçš„å¯è¯»æ€§é…ç½®
   - Web APIå’ŒMobile APIåŒæ”¯æŒ

2. **Instagram** (instagram)
   - 2ä¸ªè·¯ç”±æ–‡ä»¶
   - Web APIå’ŒPrivate API
   - æ”¯æŒç”¨æˆ·å’Œæ ‡ç­¾

3. **GitHub** (github)
   - 24ä¸ªè·¯ç”±æ–‡ä»¶
   - ä»“åº“ã€ç”¨æˆ·åŠ¨æ€ã€è¶‹åŠ¿ç­‰
   - å®˜æ–¹RSS feedæ”¯æŒ

## æ•°æ®æ¨¡å‹

### RSS é¡¹ç›®æ¨¡å‹
```typescript
interface RSSItem {
    title: string;          // æ ‡é¢˜
    description: string;    // æè¿°
    pubDate: Date | string; // å‘å¸ƒæ—¥æœŸ
    link: string;          // é“¾æ¥
    guid?: string;         // å”¯ä¸€æ ‡è¯†
    author?: string;       // ä½œè€…
    category?: string[];   // åˆ†ç±»
    enclosure?: {          // åª’ä½“é™„ä»¶
        url: string;
        type: string;
        length?: number;
    };
}
```

## æµ‹è¯•ä¸è´¨é‡

### æµ‹è¯•ç­–ç•¥
- æ¯ä¸ªè·¯ç”±éƒ½åº”è¯¥æœ‰æµ‹è¯•ç”¨ä¾‹
- æ”¯æŒå®Œæ•´è·¯ç”±æµ‹è¯•ï¼ˆ`vitest:fullroutes`ï¼‰
- æµ‹è¯•è¦†ç›–ç‡ç›‘æ§
- é›†æˆæµ‹è¯•æ”¯æŒ

### è´¨é‡ä¿è¯
- TypeScript ç±»å‹æ£€æŸ¥
- ESLint è§„åˆ™æ£€æŸ¥
- NSFW å†…å®¹æ£€æµ‹
- ä»£ç æ ¼å¼åŒ–

## å¼€å‘æŒ‡å—

### æ·»åŠ æ–°è·¯ç”±
1. åˆ›å»ºå‘½åç©ºé—´ç›®å½•
2. ç¼–å†™ `namespace.ts`
3. å®ç°è·¯ç”±å¤„ç†å‡½æ•°
4. æ·»åŠ æµ‹è¯•ç”¨ä¾‹
5. æ›´æ–°æ–‡æ¡£

### æœ€ä½³å®è·µ
- ä½¿ç”¨ç»Ÿä¸€çš„é”™è¯¯å¤„ç†
- åˆç†è®¾ç½®ç¼“å­˜æ—¶é—´
- éµå¾ªåçˆ¬ç­–ç•¥
- ä¿æŒä»£ç ç®€æ´
- å®ç°å¿…è¦çš„å·¥å…·å‡½æ•°ï¼ˆåŠ å¯†ã€ç­¾åç­‰ï¼‰

### å¸¸è§æŠ€æœ¯å®ç°
1. **ç­¾åæœºåˆ¶**
   - çŸ¥ä¹ï¼šx-zse-96 ç­¾å
   - Bç«™ï¼šWBI ç­¾å
   - å¤´æ¡ï¼ša-bogus å‚æ•°

2. **Cookieç®¡ç†**
   - è‡ªåŠ¨è·å–è®¿å®¢Cookie
   - Cookieç¼“å­˜å’Œåˆ·æ–°æœºåˆ¶
   - å¤šCookieè½®æ¢

3. **Puppeteerä½¿ç”¨**
   - è¯·æ±‚æ‹¦æˆªä¼˜åŒ–
   - é¡µé¢ç­‰å¾…ç­–ç•¥
   - èµ„æºè¿‡æ»¤

4. **æ•°æ®ç¼“å­˜**
   - è·¯ç”±çº§ç¼“å­˜
   - ç”¨æˆ·ä¿¡æ¯ç¼“å­˜
   - ç­¾åç»“æœç¼“å­˜

## ç›¸å…³æ–‡ä»¶æ¸…å•

### è·¯ç”±ç¤ºä¾‹
- `163/music/playlist.ts` - ç½‘æ˜“äº‘éŸ³ä¹æ­Œå•
- `bilibili/video/*` - Bç«™è§†é¢‘
- `twitter/user/*` - Twitter ç”¨æˆ·
- `github/issue/*` - GitHub é—®é¢˜
- `zhihu/hot.ts` - çŸ¥ä¹çƒ­æ¦œ
- `weibo/user/*` - å¾®åšç”¨æˆ·
- `instagram/2/*` - Instagram API

### å·¥å…·å‡½æ•°
- `zhihu/utils.ts` - çŸ¥ä¹ç­¾åå’Œæ•°æ®å¤„ç†
- `weibo/utils.ts` - å¾®åšCookieç®¡ç†
- `bilibili/utils.ts` - Bç«™WBIç­¾å
- `toutiao/a-bogus.ts` - å¤´æ¡åŠ å¯†å‚æ•°

### ç‰¹æ®Šè·¯ç”±
- `index.tsx` - é¦–é¡µè·¯ç”±
- `healthz.ts` - å¥åº·æ£€æŸ¥
- `robots.txt.ts` - çˆ¬è™«åè®®
- `metrics.ts` - ç›‘æ§æŒ‡æ ‡

## å˜æ›´è®°å½• (Changelog)

### 2025-12-07 15:20:00
- âœ¨ æ‰«æå¹¶è®°å½•æ‰€æœ‰çƒ­é—¨å¹³å°è·¯ç”±
- ğŸ“Š ç»Ÿè®¡å„å¹³å°è·¯ç”±æ•°é‡å’ŒæŠ€æœ¯å®ç°
- ğŸ” åˆ†æå¸¸è§æŠ€æœ¯æ–¹æ¡ˆï¼ˆç­¾åã€Cookieã€Puppeteerï¼‰
- ğŸ“ æ›´æ–°å¼€å‘æŒ‡å—å’Œæœ€ä½³å®è·µ
- ğŸ› ï¸ è®°å½•å·¥å…·å‡½æ•°å’ŒåŠ å¯†æœºåˆ¶

### 2025-12-07 14:11:44
- âœ¨ åˆ›å»ºè·¯ç”±ç³»ç»Ÿæ–‡æ¡£
- ğŸ“Š ç»Ÿè®¡è·¯ç”±åˆ†ç±»å’Œç‰¹æ€§
- ğŸ“ è®°å½•å¼€å‘è§„èŒƒå’Œæœ€ä½³å®è·µ