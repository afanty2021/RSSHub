# 贡献指南

<cite>
**本文档中引用的文件**  
- [CONTRIBUTING.md](file://CONTRIBUTING.md)
- [CODE_OF_CONDUCT.md](file://CODE_OF_CONDUCT.md)
- [README.md](file://README.md)
- [package.json](file://package.json)
- [eslint.config.mjs](file://eslint.config.mjs)
- [vitest.config.ts](file://vitest.config.ts)
- [tsconfig.json](file://tsconfig.json)
- [.prettierrc](file://.prettierrc)
- [Dockerfile](file://Dockerfile)
- [docker-compose.yml](file://docker-compose.yml)
- [lib/setup.test.ts](file://lib/setup.test.ts)
- [scripts/workflow/build-routes.ts](file://scripts/workflow/build-routes.ts)
- [scripts/workflow/build-docs.ts](file://scripts/workflow/build-docs.ts)
</cite>

## 目录
1. [简介](#简介)
2. [贡献流程](#贡献流程)
3. [开发环境设置](#开发环境设置)
4. [代码风格指南](#代码风格指南)
5. [测试要求](#测试要求)
6. [文档贡献](#文档贡献)
7. [社区行为准则](#社区行为准则)
8. [代码审查流程](#代码审查流程)

## 简介

RSSHub 是一个开源的 RSS 聚合网络，旨在将各种内容源转换为 RSS 格式，使用户能够通过 RSS 阅读器订阅和跟踪他们感兴趣的内容。该项目拥有一个活跃的开源社区，持续为项目贡献新的路由、功能和错误修复。

本贡献指南旨在为社区成员提供详细的指导，帮助他们为 RSSHub 项目做出贡献。我们将介绍项目的贡献流程、开发环境设置、代码风格指南、测试要求、文档贡献方式以及社区行为准则。

**Section sources**
- [README.md](file://README.md#L1-L62)
- [CONTRIBUTING.md](file://CONTRIBUTING.md#L1-L2)

## 贡献流程

RSSHub 项目欢迎所有形式的贡献，包括问题报告、功能请求和代码提交。贡献流程如下：

1. **问题报告**：如果您在使用 RSSHub 时遇到问题，可以在 GitHub 仓库的 Issues 页面报告问题。请提供详细的错误信息、重现步骤和相关环境信息，以便开发者能够快速定位和解决问题。

2. **功能请求**：如果您希望 RSSHub 支持新的内容源或功能，可以在 Issues 页面提交功能请求。请详细描述您希望添加的功能，并提供相关的内容源链接。

3. **代码提交**：如果您希望为项目贡献代码，请先 Fork 仓库，然后在本地进行开发。完成开发后，提交 Pull Request 到主仓库。Pull Request 将经过代码审查流程，审查通过后将被合并到主分支。

**Section sources**
- [README.md](file://README.md#L32-L37)
- [CONTRIBUTING.md](file://CONTRIBUTING.md#L1-L2)

## 开发环境设置

为了顺利开始 RSSHub 的开发，您需要设置以下开发环境：

1. **Node.js**：RSSHub 使用 Node.js 作为运行环境，建议使用 Node.js 22 或 24 版本。您可以通过 nvm 或直接下载安装 Node.js。

2. **pnpm**：RSSHub 使用 pnpm 作为包管理工具。您可以通过 npm 安装 pnpm：
   ```bash
   npm install -g pnpm
   ```

3. **依赖安装**：克隆 RSSHub 仓库后，进入项目目录并安装依赖：
   ```bash
   pnpm install
   ```

4. **开发服务器**：启动开发服务器以进行本地开发：
   ```bash
   pnpm dev
   ```

5. **Docker**：如果您希望使用 Docker 进行开发，可以使用提供的 Dockerfile 和 docker-compose.yml 文件。运行以下命令启动容器：
   ```bash
   docker-compose up
   ```

**Section sources**
- [package.json](file://package.json#L28-L48)
- [Dockerfile](file://Dockerfile#L1-L207)
- [docker-compose.yml](file://docker-compose.yml#L1-L63)

## 代码风格指南

RSSHub 项目遵循严格的代码风格指南，以确保代码的一致性和可读性。主要的代码风格规则如下：

1. **ESLint**：项目使用 ESLint 进行代码质量检查。您可以在提交代码前运行 `pnpm lint` 来检查代码是否符合规范。

2. **Prettier**：项目使用 Prettier 进行代码格式化。您可以在提交代码前运行 `pnpm format` 来格式化代码。

3. **TypeScript**：项目使用 TypeScript 作为主要开发语言。请确保您的代码符合 TypeScript 的类型检查规则。

4. **文件命名**：文件名应使用 kebab-case 命名法，例如 `test-example.ts`。

5. **代码注释**：请在关键代码处添加注释，解释代码的功能和逻辑。

**Section sources**
- [eslint.config.mjs](file://eslint.config.mjs#L1-L363)
- [.prettierrc](file://.prettierrc#L1-L8)
- [tsconfig.json](file://tsconfig.json#L1-L24)

## 测试要求

RSSHub 项目要求所有代码提交都必须通过测试。测试分为单元测试和集成测试，具体要求如下：

1. **单元测试**：单元测试用于测试单个函数或模块的功能。您可以在 `lib` 目录下编写单元测试，使用 Vitest 作为测试框架。

2. **集成测试**：集成测试用于测试多个模块之间的交互。您可以在 `scripts/workflow` 目录下编写集成测试，确保新功能与现有功能的兼容性。

3. **测试运行**：运行以下命令来执行测试：
   ```bash
   pnpm test
   ```

4. **测试覆盖率**：项目要求测试覆盖率不低于 80%。您可以在测试报告中查看覆盖率信息。

**Section sources**
- [vitest.config.ts](file://vitest.config.ts#L1-L22)
- [lib/setup.test.ts](file://lib/setup.test.ts#L1-L252)

## 文档贡献

RSSHub 项目的文档是项目的重要组成部分，帮助用户和开发者理解和使用项目。文档贡献方式如下：

1. **改进现有文档**：如果您发现现有文档有错误或不清晰的地方，可以直接修改相关文档文件并提交 Pull Request。

2. **添加新文档**：如果您希望添加新的文档，可以在 `docs` 目录下创建新的 Markdown 文件，并按照现有文档的格式编写内容。

3. **文档生成**：项目使用脚本自动生成部分文档。您可以在 `scripts/workflow/build-docs.ts` 文件中查看文档生成逻辑。

**Section sources**
- [scripts/workflow/build-docs.ts](file://scripts/workflow/build-docs.ts#L102-L134)
- [README.md](file://README.md#L23-L24)

## 社区行为准则

RSSHub 项目遵循 Contributor Covenant 行为准则，旨在创建一个开放、友好、多样、包容和健康的社区。具体准则如下：

1. **我们的承诺**：作为成员、贡献者和领导者，我们承诺使社区成为一个无骚扰的环境，无论年龄、体型、可见或不可见的残疾、种族、性别特征、性别认同和表达、经验水平、教育、社会经济地位、国籍、外貌、种族、宗教或性取向。

2. **我们的标准**：促进社区积极环境的行为包括：
   - 对他人表现出同理心和善意
   - 尊重不同的意见、观点和经验
   - 给予和优雅地接受建设性反馈
   - 对我们的错误负责并向受影响的人道歉，从经验中学习
   - 关注对我们个人和整体社区的最佳利益

3. **不可接受的行为**：包括但不限于：
   - 使用性化语言或图像，以及任何形式的性关注或进展
   - 恶搞、侮辱或贬低性评论，以及人身或政治攻击
   - 公开或私下骚扰
   - 未经明确许可发布他人的私人信息，如物理或电子邮件地址
   - 在专业环境中可能被认为是不合适的其他行为

4. **执行**：社区领导者负责澄清和执行可接受行为的标准，并对任何他们认为不适当、威胁、冒犯或有害的行为采取适当和公平的纠正措施。

**Section sources**
- [CODE_OF_CONDUCT.md](file://CODE_OF_CONDUCT.md#L1-L85)

## 代码审查流程

RSSHub 项目的代码审查流程旨在确保代码质量和项目稳定性。具体流程如下：

1. **Pull Request 提交**：提交 Pull Request 后，CI 系统将自动运行测试和代码检查。

2. **自动测试**：CI 系统将运行单元测试和集成测试，确保新代码不会破坏现有功能。

3. **代码审查**：项目维护者将对 Pull Request 进行代码审查，检查代码是否符合风格指南、功能是否完整、测试是否充分。

4. **反馈和修改**：根据审查反馈，贡献者需要对代码进行修改，并重新提交。

5. **合并**：审查通过后，Pull Request 将被合并到主分支。

**Section sources**
- [scripts/workflow/test-route/test.mjs](file://scripts/workflow/test-route/test.mjs#L1-L79)
- [scripts/workflow/test-issue/call-maintainer.mjs](file://scripts/workflow/test-issue/call-maintainer.mjs#L139-L178)