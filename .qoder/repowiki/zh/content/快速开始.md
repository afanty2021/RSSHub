# å¿«é€Ÿå¼€å§‹

<cite>
**æœ¬æ–‡æ¡£ä¸­å¼•ç”¨çš„æ–‡ä»¶**  
- [README.md](file://README.md)
- [Dockerfile](file://Dockerfile)
- [docker-compose.yml](file://docker-compose.yml)
- [lib/config.ts](file://lib/config.ts)
- [package.json](file://package.json)
- [fly.toml](file://fly.toml)
- [vercel.json](file://vercel.json)
- [scripts/ansible/rsshub.env](file://scripts/ansible/rsshub.env)
</cite>

## ç›®å½•
1. [ç®€ä»‹](#ç®€ä»‹)
2. [å®‰è£…æ–¹å¼](#å®‰è£…æ–¹å¼)
3. [ç¯å¢ƒé…ç½®](#ç¯å¢ƒé…ç½®)
4. [ä½¿ç”¨ç¤ºä¾‹](#ä½¿ç”¨ç¤ºä¾‹)
5. [å¸¸è§é—®é¢˜è§£å†³æ–¹æ¡ˆ](#å¸¸è§é—®é¢˜è§£å†³æ–¹æ¡ˆ)
6. [éƒ¨ç½²éªŒè¯æ¸…å•](#éƒ¨ç½²éªŒè¯æ¸…å•)
7. [æœ€å°åŒ–é…ç½®ç¤ºä¾‹](#æœ€å°åŒ–é…ç½®ç¤ºä¾‹)

## ç®€ä»‹

RSSHub æ˜¯ä¸€ä¸ªå¼€æºçš„ã€æ˜“äºä½¿ç”¨ä¸”å¯æ‰©å±•çš„ RSS èšåˆå™¨ï¼Œæ—¨åœ¨å°†å„ç§å†…å®¹æºè½¬æ¢ä¸º RSS è®¢é˜…ã€‚å®ƒæ”¯æŒè¶…è¿‡ 5000 ç§å…¨çƒå®ä¾‹ï¼Œèƒ½å¤Ÿä»å„ç§æ¥æºèšåˆæ•°ç™¾ä¸‡æ¡å†…å®¹ã€‚RSSHub çš„æ´»è·ƒå¼€æºç¤¾åŒºç¡®ä¿äº†æ–°è·¯ç”±ã€æ–°åŠŸèƒ½å’Œé”™è¯¯ä¿®å¤çš„æŒç»­äº¤ä»˜ã€‚

æœ¬æŒ‡å—æ—¨åœ¨å¸®åŠ©ç”¨æˆ·å¿«é€Ÿéƒ¨ç½²å’Œè¿è¡Œ RSSHub å®ä¾‹ï¼Œæä¾›å¤šç§å®‰è£…æ–¹å¼çš„è¯¦ç»†æ­¥éª¤ï¼ŒåŒ…æ‹¬ Docker éƒ¨ç½²ã€ç›´æ¥è¿è¡Œå’Œäº‘å¹³å°éƒ¨ç½²ã€‚åŒæ—¶ï¼Œè§£é‡Šå¿…è¦çš„ç¯å¢ƒé…ç½®ï¼Œå¦‚ Redis è¿æ¥è®¾ç½®å’Œç«¯å£é…ç½®ï¼Œå¹¶æä¾›åŸºæœ¬çš„ä½¿ç”¨ç¤ºä¾‹ï¼Œå±•ç¤ºå¦‚ä½•è®¿é—®å’Œæµ‹è¯• RSSHub æœåŠ¡ã€‚

**Section sources**
- [README.md](file://README.md#L1-L62)

## å®‰è£…æ–¹å¼

### Docker éƒ¨ç½²

Docker éƒ¨ç½²æ˜¯è¿è¡Œ RSSHub çš„æœ€ç®€å•å’Œæœ€æ¨èçš„æ–¹å¼ã€‚å®ƒé€šè¿‡å®¹å™¨åŒ–æŠ€æœ¯ï¼Œç¡®ä¿äº†ç¯å¢ƒçš„ä¸€è‡´æ€§å’Œå¯ç§»æ¤æ€§ã€‚

1. **ä½¿ç”¨ Docker å‘½ä»¤éƒ¨ç½²**ï¼š
   ```bash
   docker run -d --name rsshub -p 1200:1200 diygod/rsshub
   ```
   æ­¤å‘½ä»¤å°†å¯åŠ¨ä¸€ä¸ªåä¸º `rsshub` çš„å®¹å™¨ï¼Œå¹¶å°†ä¸»æœºçš„ 1200 ç«¯å£æ˜ å°„åˆ°å®¹å™¨çš„ 1200 ç«¯å£ã€‚

2. **ä½¿ç”¨ Docker Compose éƒ¨ç½²**ï¼š
   åˆ›å»ºä¸€ä¸ª `docker-compose.yml` æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š
   ```yaml
   version: '3'
   services:
     rsshub:
       image: diygod/rsshub
       restart: always
       ports:
         - '1200:1200'
       environment:
         NODE_ENV: production
         CACHE_TYPE: redis
         REDIS_URL: 'redis://redis:6379/'
         PUPPETEER_WS_ENDPOINT: 'ws://browserless:3000'
         PUPPETEER_REAL_BROWSER_SERVICE: 'http://real-browser:3000'
       depends_on:
         - redis
         - browserless
     redis:
       image: redis:alpine
       restart: always
       volumes:
         - redis-data:/data
     browserless:
       image: browserless/chrome
       restart: always
       ulimits:
         core:
           hard: 0
           soft: 0
   volumes:
     redis-data:
   ```
   ç„¶åè¿è¡Œ `docker-compose up -d` å¯åŠ¨æœåŠ¡ã€‚

**Section sources**
- [Dockerfile](file://Dockerfile#L1-L207)
- [docker-compose.yml](file://docker-compose.yml#L1-L63)

### ç›´æ¥è¿è¡Œ

å¯¹äºå¸Œæœ›åœ¨æœ¬åœ°ç¯å¢ƒä¸­ç›´æ¥è¿è¡Œ RSSHub çš„ç”¨æˆ·ï¼Œå¯ä»¥ä½¿ç”¨ Node.js ç›´æ¥è¿è¡Œã€‚

1. **å…‹éš†ä»“åº“**ï¼š
   ```bash
   git clone https://github.com/DIYgod/RSSHub.git
   cd RSSHub
   ```

2. **å®‰è£…ä¾èµ–**ï¼š
   ```bash
   pnpm install
   ```

3. **å¯åŠ¨æœåŠ¡**ï¼š
   ```bash
   npm run dev
   ```
   è¿™å°†å¯åŠ¨ RSSHub æœåŠ¡ï¼Œå¹¶åœ¨å¼€å‘æ¨¡å¼ä¸‹ç›‘å¬ 1200 ç«¯å£ã€‚

**Section sources**
- [package.json](file://package.json#L29-L48)

### äº‘å¹³å°éƒ¨ç½²

RSSHub æ”¯æŒå¤šç§äº‘å¹³å°éƒ¨ç½²ï¼ŒåŒ…æ‹¬ Fly.io å’Œ Vercelã€‚

1. **Fly.io éƒ¨ç½²**ï¼š
   ä½¿ç”¨ `fly.toml` é…ç½®æ–‡ä»¶ï¼Œå¯ä»¥é€šè¿‡ Fly.io CLI å·¥å…·éƒ¨ç½² RSSHubã€‚
   ```bash
   fly launch
   fly deploy
   ```

2. **Vercel éƒ¨ç½²**ï¼š
   ä½¿ç”¨ `vercel.json` é…ç½®æ–‡ä»¶ï¼Œå¯ä»¥é€šè¿‡ Vercel CLI å·¥å…·éƒ¨ç½² RSSHubã€‚
   ```bash
   vercel
   ```

**Section sources**
- [fly.toml](file://fly.toml#L1-L16)
- [vercel.json](file://vercel.json#L1-L17)

## ç¯å¢ƒé…ç½®

RSSHub çš„ç¯å¢ƒé…ç½®ä¸»è¦é€šè¿‡ç¯å¢ƒå˜é‡è¿›è¡Œï¼Œè¿™äº›å˜é‡å¯ä»¥åœ¨ `.env` æ–‡ä»¶ä¸­è®¾ç½®ï¼Œä¹Ÿå¯ä»¥åœ¨ Docker Compose æˆ–äº‘å¹³å°çš„é…ç½®æ–‡ä»¶ä¸­è®¾ç½®ã€‚

### Redis è¿æ¥è®¾ç½®

Redis ç”¨äºç¼“å­˜æ•°æ®ï¼Œæé«˜æ€§èƒ½ã€‚å¯ä»¥é€šè¿‡ä»¥ä¸‹ç¯å¢ƒå˜é‡é…ç½® Redis è¿æ¥ï¼š
- `CACHE_TYPE`: ç¼“å­˜ç±»å‹ï¼Œæ”¯æŒ `memory` å’Œ `redis`ã€‚
- `REDIS_URL`: Redis è¿æ¥ URLï¼Œä¾‹å¦‚ `redis://localhost:6379/`ã€‚

### ç«¯å£é…ç½®

RSSHub é»˜è®¤ç›‘å¬ 1200 ç«¯å£ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹ç¯å¢ƒå˜é‡ä¿®æ”¹ï¼š
- `PORT`: ç›‘å¬ç«¯å£ï¼Œé»˜è®¤ä¸º 1200ã€‚

### å…¶ä»–é…ç½®

- `NODE_ENV`: ç¯å¢ƒå˜é‡ï¼Œè®¾ç½®ä¸º `production` ä»¥å¯ç”¨ç”Ÿäº§æ¨¡å¼ã€‚
- `PUPPETEER_WS_ENDPOINT`: Puppeteer WebSocket ç«¯ç‚¹ï¼Œç”¨äºæµè§ˆå™¨è‡ªåŠ¨åŒ–ã€‚
- `PUPPETEER_REAL_BROWSER_SERVICE`: å®é™…æµè§ˆå™¨æœåŠ¡åœ°å€ã€‚

**Section sources**
- [lib/config.ts](file://lib/config.ts#L1-L800)

## ä½¿ç”¨ç¤ºä¾‹

### è®¿é—® RSSHub æœåŠ¡

å¯åŠ¨ RSSHub æœåŠ¡åï¼Œå¯ä»¥é€šè¿‡æµè§ˆå™¨æˆ– RSS é˜…è¯»å™¨è®¿é—®æœåŠ¡ã€‚ä¾‹å¦‚ï¼Œè®¿é—® `http://localhost:1200` å¯ä»¥æŸ¥çœ‹ RSSHub çš„ä¸»é¡µã€‚

### æµ‹è¯•å¥åº·æ£€æŸ¥

RSSHub æä¾›äº†å¥åº·æ£€æŸ¥æ¥å£ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤æµ‹è¯•ï¼š
```bash
curl http://localhost:1200/healthz
```
å¦‚æœè¿”å› `ok`ï¼Œåˆ™è¡¨ç¤ºæœåŠ¡æ­£å¸¸è¿è¡Œã€‚

**Section sources**
- [lib/registry.ts](file://lib/registry.ts#L255-L256)

## å¸¸è§é—®é¢˜è§£å†³æ–¹æ¡ˆ

### ç«¯å£å†²çª

å¦‚æœ 1200 ç«¯å£å·²è¢«å ç”¨ï¼Œå¯ä»¥é€šè¿‡ä¿®æ”¹ `PORT` ç¯å¢ƒå˜é‡æ¥æ›´æ”¹ç›‘å¬ç«¯å£ã€‚

### ä¾èµ–å®‰è£…å¤±è´¥

å¦‚æœåœ¨å®‰è£…ä¾èµ–æ—¶é‡åˆ°é—®é¢˜ï¼Œå¯ä»¥å°è¯•ä½¿ç”¨å›½å†…é•œåƒæºã€‚ä¾‹å¦‚ï¼Œåœ¨ `Dockerfile` ä¸­è®¾ç½® `USE_CHINA_NPM_REGISTRY=1`ã€‚

### Redis è¿æ¥å¤±è´¥

ç¡®ä¿ Redis æœåŠ¡å·²å¯åŠ¨ï¼Œå¹¶ä¸” `REDIS_URL` é…ç½®æ­£ç¡®ã€‚å¯ä»¥é€šè¿‡ `redis-cli ping` å‘½ä»¤æµ‹è¯• Redis è¿æ¥ã€‚

**Section sources**
- [Dockerfile](file://Dockerfile#L8-L17)
- [lib/utils/cache/redis.ts](file://lib/utils/cache/redis.ts#L1-L77)

## éƒ¨ç½²éªŒè¯æ¸…å•

1. **æœåŠ¡å¯åŠ¨**ï¼šç¡®ä¿ RSSHub æœåŠ¡å·²æˆåŠŸå¯åŠ¨ï¼Œå¹¶åœ¨æ—¥å¿—ä¸­çœ‹åˆ° `ğŸ‰ RSSHub is running on port 1200! Cheers!`ã€‚
2. **ç«¯å£ç›‘å¬**ï¼šç¡®è®¤ 1200 ç«¯å£ï¼ˆæˆ–è‡ªå®šä¹‰ç«¯å£ï¼‰å·²æ­£ç¡®ç›‘å¬ã€‚
3. **å¥åº·æ£€æŸ¥**ï¼šé€šè¿‡ `curl http://localhost:1200/healthz` æµ‹è¯•å¥åº·æ£€æŸ¥æ¥å£ï¼Œç¡®ä¿è¿”å› `ok`ã€‚
4. **Redis è¿æ¥**ï¼šæ£€æŸ¥ Redis è¿æ¥æ˜¯å¦æ­£å¸¸ï¼Œç¡®ä¿ç¼“å­˜åŠŸèƒ½æ­£å¸¸å·¥ä½œã€‚
5. **å¤–éƒ¨è®¿é—®**ï¼šå¦‚æœéœ€è¦ä»å¤–éƒ¨ç½‘ç»œè®¿é—®ï¼Œç¡®ä¿é˜²ç«å¢™å’Œç½‘ç»œé…ç½®å…è®¸å¤–éƒ¨è¿æ¥ã€‚

**Section sources**
- [lib/index.ts](file://lib/index.ts#L1-L63)
- [docker-compose.yml](file://docker-compose.yml#L17-L20)

## æœ€å°åŒ–é…ç½®ç¤ºä¾‹

ä»¥ä¸‹æ˜¯ä¸€ä¸ªæœ€å°åŒ–çš„é…ç½®ç¤ºä¾‹ï¼Œä»…åŒ…å«å¿…è¦çš„ç¯å¢ƒå˜é‡ï¼š

```env
NODE_ENV=production
CACHE_TYPE=redis
REDIS_URL=redis://localhost:6379/
PORT=1200
```

æ­¤é…ç½®ç¡®ä¿ RSSHub åœ¨ç”Ÿäº§æ¨¡å¼ä¸‹è¿è¡Œï¼Œä½¿ç”¨ Redis ä½œä¸ºç¼“å­˜ï¼Œå¹¶ç›‘å¬ 1200 ç«¯å£ã€‚

**Section sources**
- [scripts/ansible/rsshub.env](file://scripts/ansible/rsshub.env#L1-L4)