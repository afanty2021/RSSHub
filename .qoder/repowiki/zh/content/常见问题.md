# 常见问题

<cite>
**本文档中引用的文件**  
- [README.md](file://README.md)
- [package.json](file://package.json)
- [lib/config.ts](file://lib/config.ts)
- [lib/middleware/access-control.ts](file://lib/middleware/access-control.ts)
- [lib/middleware/cache.ts](file://lib/middleware/cache.ts)
- [lib/middleware/anti-hotlink.ts](file://lib/middleware/anti-hotlink.ts)
- [lib/errors/index.tsx](file://lib/errors/index.tsx)
- [lib/utils/cache/index.ts](file://lib/utils/cache/index.ts)
- [SECURITY.md](file://SECURITY.md)
- [Dockerfile](file://Dockerfile)
- [docker-compose.yml](file://docker-compose.yml)
</cite>

## 目录
1. [安装问题](#安装问题)
2. [配置问题](#配置问题)
3. [性能问题](#性能问题)
4. [安全问题](#安全问题)
5. [错误代码解释](#错误代码解释)
6. [性能优化建议](#性能优化建议)
7. [安全最佳实践](#安全最佳实践)
8. [相关文档链接](#相关文档链接)

## 安装问题

### 如何安装RSSHub？

RSSHub可以通过多种方式安装，包括Docker、npm和直接运行源码。推荐使用Docker进行安装，因为它可以避免环境依赖问题。

对于Docker安装，可以使用提供的`docker-compose.yml`文件进行一键部署。该文件配置了RSSHub主服务、Redis缓存和浏览器服务等组件。

**Section sources**
- [Dockerfile](file://Dockerfile#L1-L207)
- [docker-compose.yml](file://docker-compose.yml#L1-L63)

## 配置问题

### 如何配置RSSHub？

RSSHub的配置主要通过环境变量进行。核心配置文件位于`lib/config.ts`，其中定义了所有可配置的选项。主要配置项包括：

- **网络配置**：端口、监听地址、请求超时等
- **缓存配置**：缓存类型（内存或Redis）、缓存过期时间等
- **代理配置**：代理服务器设置
- **访问控制**：访问密钥设置
- **日志配置**：日志级别、调试信息等

配置可以通过`.env`文件或直接设置环境变量来完成。

**Section sources**
- [lib/config.ts](file://lib/config.ts#L1-L800)

## 性能问题

### RSSHub响应慢怎么办？

RSSHub的性能问题通常与缓存配置、网络请求和服务器资源有关。可以通过以下方式优化性能：

1. **启用Redis缓存**：使用Redis作为缓存后端，而不是内存缓存，可以显著提高并发性能。
2. **调整缓存过期时间**：根据内容更新频率合理设置`CACHE_EXPIRE`和`CACHE_CONTENT_EXPIRE`。
3. **优化服务器资源**：确保服务器有足够的内存和CPU资源。

**Section sources**
- [lib/middleware/cache.ts](file://lib/middleware/cache.ts#L1-L84)
- [lib/utils/cache/index.ts](file://lib/utils/cache/index.ts#L1-L101)

## 安全问题

### 如何保护RSSHub实例的安全？

RSSHub提供了多种安全机制来保护实例：

1. **访问控制**：通过`ACCESS_KEY`环境变量设置访问密钥，只有提供正确密钥的请求才能访问受保护的路由。
2. **反盗链保护**：通过`anti-hotlink`中间件防止内容被其他网站盗用。
3. **请求限制**：内置请求频率限制，防止滥用。

**Section sources**
- [lib/middleware/access-control.ts](file://lib/middleware/access-control.ts#L1-L27)
- [lib/middleware/anti-hotlink.ts](file://lib/middleware/anti-hotlink.ts#L1-L171)

## 错误代码解释

### 常见错误代码及处理方法

RSSHub定义了多种错误类型，每种错误都有相应的HTTP状态码：

- **403 Forbidden**：访问被拒绝，通常是由于访问密钥不正确或缺失。检查`ACCESS_KEY`配置和请求中的`key`参数。
- **404 Not Found**：路由不存在，检查请求的URL是否正确。
- **503 Service Unavailable**：服务不可用，可能是由于上游服务不可达或内部错误。
- **RequestInProgressError**：请求正在进行中，请稍后再试。这是由于并发请求限制导致的正常现象。

**Section sources**
- [lib/errors/index.tsx](file://lib/errors/index.tsx#L1-L83)
- [lib/errors/types/not-found.ts](file://lib/errors/types/not-found.ts#L1-L5)
- [lib/errors/types/request-in-progress.ts](file://lib/errors/types/request-in-progress.ts#L1-L5)

## 性能优化建议

### 如何优化RSSHub的性能？

为了获得最佳性能，建议采取以下措施：

1. **使用Redis作为缓存**：Redis提供了比内存缓存更好的性能和可靠性。
2. **合理配置缓存过期时间**：根据内容更新频率设置合适的缓存过期时间。
3. **启用集群模式**：对于高负载场景，可以启用集群模式来分担负载。
4. **监控系统资源**：定期检查内存、CPU和网络使用情况，及时发现性能瓶颈。

**Section sources**
- [lib/config.ts](file://lib/config.ts#L23-L28)
- [lib/utils/cache/index.ts](file://lib/utils/cache/index.ts#L18-L60)

## 安全最佳实践

### RSSHub安全最佳实践

为了确保RSSHub实例的安全，建议遵循以下最佳实践：

1. **始终使用访问密钥**：即使在内网环境中，也建议启用访问控制。
2. **定期更新**：保持RSSHub和所有依赖库的最新版本，以获取最新的安全补丁。
3. **限制暴露的端口**：只在必要时暴露端口，并使用防火墙规则限制访问。
4. **监控日志**：定期检查日志，及时发现异常访问模式。

**Section sources**
- [SECURITY.md](file://SECURITY.md#L1-L10)
- [lib/middleware/access-control.ts](file://lib/middleware/access-control.ts#L1-L27)

## 相关文档链接

- [RSSHub官方文档](https://docs.rsshub.app)
- [RSSHub GitHub仓库](https://github.com/DIYgod/RSSHub)
- [RSSHub Radar浏览器扩展](https://github.com/DIYgod/RSSHub-Radar)
- [部署指南](https://docs.rsshub.app/deploy/)